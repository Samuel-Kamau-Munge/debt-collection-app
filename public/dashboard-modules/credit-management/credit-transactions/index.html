<div class="credit-transactions-container">
  <div class="page-header">
    <h2>ğŸ”„ Credit Transactions</h2>
    <p>Track and manage all credit account transactions</p>
  </div>

  <div class="transaction-summary-cards">
    <div class="summary-card">
      <div class="card-icon">ğŸ¦</div>
      <div class="card-content">
        <div class="card-value" id="total-transactions">0</div>
        <div class="card-label">Credit Accounts</div>
      </div>
    </div>
    <div class="summary-card">
      <div class="card-icon">ğŸ’°</div>
      <div class="card-content">
        <div class="card-value" id="total-withdrawals">Ksh 0</div>
        <div class="card-label">Used Credit</div>
      </div>
    </div>
    <div class="summary-card">
      <div class="card-icon">ğŸ’³</div>
      <div class="card-content">
        <div class="card-value" id="total-payments">Ksh 0</div>
        <div class="card-label">Available Credit</div>
      </div>
    </div>
    <div class="summary-card">
      <div class="card-icon">ğŸ“ˆ</div>
      <div class="card-content">
        <div class="card-value" id="net-amount">Ksh 0</div>
        <div class="card-label">Total Credit Limit</div>
      </div>
    </div>
  </div>

  <div class="filters-section">
    <div class="search-box">
      <span class="search-icon">ğŸ”</span>
      <input type="text" id="search-transactions" placeholder="Search transactions...">
    </div>
    <div class="filter-controls">
      <select id="account-filter">
        <option value="">All Accounts</option>
      </select>
      <select id="type-filter">
        <option value="">All Types</option>
        <option value="withdrawal">Withdrawals</option>
        <option value="payment">Payments</option>
      </select>
      <select id="status-filter">
        <option value="">All Status</option>
        <option value="completed">Completed</option>
        <option value="pending">Pending</option>
        <option value="failed">Failed</option>
      </select>
    </div>
  </div>

  <div class="transactions-section">
    <div class="section-header">
      <h3>ğŸ“‹ Transaction History</h3>
      <div class="section-actions">
        <button class="btn-primary" onclick="createNewTransaction()">â• New Transaction</button>
        <button class="btn-secondary" onclick="refreshTransactions()">ğŸ”„ Refresh</button>
      </div>
    </div>
    <div class="transactions-table-container">
      <table class="transactions-table">
        <thead>
          <tr>
            <th>Date</th>
            <th>Account</th>
            <th>Type</th>
            <th>Amount</th>
            <th>Description</th>
            <th>Status</th>
            <th>Actions</th>
          </tr>
        </thead>
        <tbody id="transactions-table-body">
          <tr>
            <td colspan="7" style="text-align: center; padding: 2rem; color: #fff;">Loading transactions...</td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>
</div>

<div id="new-transaction-modal" class="modal-overlay" style="display: none;">
  <div class="modal-content">
    <div class="modal-header">
      <h3>Create New Transaction</h3>
      <button class="close-btn" onclick="closeNewTransactionModal()">&times;</button>
    </div>
    <div class="modal-body">
      <form id="new-transaction-form" class="transaction-form">
        <div class="form-group">
          <label for="credit-account">Credit Account *</label>
          <select id="credit-account" required>
            <option value="">Select Account</option>
          </select>
        </div>
        <div class="form-group">
          <label for="transaction-type">Transaction Type *</label>
          <select id="transaction-type" required onchange="handleTransactionTypeChange()">
            <option value="">Select Type</option>
            <option value="withdrawal">Withdrawal</option>
            <option value="payment">Payment</option>
          </select>
        </div>
        <div class="form-group">
          <label for="transaction-amount">Amount (Ksh) *</label>
          <input type="number" id="transaction-amount" required min="1" placeholder="1000">
        </div>
        <div class="form-group">
          <label for="transaction-description">Description</label>
          <textarea id="transaction-description" placeholder="Optional description..."></textarea>
        </div>
        <div class="form-actions">
          <button type="button" class="btn-secondary" onclick="closeNewTransactionModal()">Cancel</button>
          <button type="submit" class="btn-primary">Create Transaction</button>
        </div>
      </form>
    </div>
  </div>
</div>

<!-- Transaction Details Modal -->
<div id="transaction-details-modal" class="modal-overlay" style="display: none;">
  <div class="modal-content">
    <div class="modal-header">
      <h3>Transaction Details</h3>
      <button class="close-btn" onclick="closeTransactionDetailsModal()">&times;</button>
    </div>
    <div class="modal-body" id="transaction-details-body">
      <!-- Populated dynamically -->
    </div>
    <div class="modal-footer" style="display:flex; gap:0.5rem; justify-content:flex-end; margin-top:1rem;">
      <button class="btn-secondary" onclick="closeTransactionDetailsModal()">Close</button>
      <button class="btn-primary" onclick="printTransactions()">Print</button>
    </div>
  </div>
</div>