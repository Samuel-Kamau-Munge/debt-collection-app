<div class="page-header">
  <h2>üí∞ Receive Payment</h2>
  <p>Record payments from existing debtors</p>
</div>

<div class="payment-form-container">
  <div class="payment-form-card">
    <div class="form-header">
      <h3>Payment Details</h3>
      <p>Select a debtor and record their payment</p>
    </div>
    
    <form id="receive-payment-form" class="payment-form">
      <div class="form-group">
        <label for="debtor-select">Select Debtor *</label>
        <select id="debtor-select" required>
          <option value="">Choose a debtor...</option>
        </select>
        <div class="form-help">Select the debtor making the payment</div>
      </div>
      
      <div class="form-group">
        <label for="debt-select">Select Debt *</label>
        <select id="debt-select" required disabled>
          <option value="">Choose a debt...</option>
        </select>
        <div class="form-help">Select the specific debt being paid</div>
      </div>
      
      <div class="form-row">
        <div class="form-group">
          <label for="payment-amount">Payment Amount *</label>
          <input type="number" id="payment-amount" step="0.01" min="0" required>
          <div class="form-help">Enter the amount being paid</div>
        </div>
        
        <div class="form-group">
          <label for="payment-method">Payment Method *</label>
          <select id="payment-method" required>
            <option value="">Select method...</option>
            <option value="kcb">KCB Mobile Banking</option>
          </select>
        </div>
      </div>
      
      <div class="form-group">
        <label for="payment-date">Payment Date *</label>
        <input type="date" id="payment-date" required>
        <div class="form-help">Date when payment was received</div>
      </div>
      
<!-- M-Pesa fields removed: App now supports KCB only -->      
      <div class="form-group" id="kcb-fields" style="display: none;">
        <label for="kcb-phone-number">KCB Mobile Phone Number *</label>
        <input type="tel" id="kcb-phone-number" placeholder="e.g., 254708374149">
        <div class="form-help">Phone number registered with KCB Mobile Banking</div>
        
        <label for="account-number">KCB Account Number *</label>
        <input type="text" id="account-number" placeholder="e.g., 1234567890">
        <div class="form-help">
          <strong>Development Mode:</strong> Using mock KCB credentials<br>
          <strong>Note:</strong> Real payments will work once you get API credentials from KCB
        </div>
      </div>
      
      <div class="form-group">
        <label for="reference-number">Reference Number</label>
        <input type="text" id="reference-number" placeholder="e.g., Receipt #12345">
        <div class="form-help">Optional reference number for tracking</div>
      </div>
      
      <div class="form-group">
        <label for="payment-notes">Notes</label>
        <textarea id="payment-notes" rows="3" placeholder="Additional notes about the payment..."></textarea>
      </div>
      
      <div class="form-actions">
        <button type="button" class="btn-secondary" onclick="clearPaymentForm()">
          <span class="btn-icon">üóëÔ∏è</span>
          Clear Form
        </button>
        <button type="submit" class="btn-primary">
          <span class="btn-icon">üí∞</span>
          Record Payment
        </button>
      </div>
    </form>
  </div>
  
  <div class="payment-summary-card">
    <div class="summary-header">
      <h3>Payment Summary</h3>
    </div>
    <div class="summary-content">
      <div class="summary-item">
        <span class="summary-label">Debtor:</span>
        <span class="summary-value" id="summary-debtor">-</span>
      </div>
      <div class="summary-item">
        <span class="summary-label">Debt Amount:</span>
        <span class="summary-value" id="summary-debt-amount">-</span>
      </div>
      <div class="summary-item">
        <span class="summary-label">Payment Amount:</span>
        <span class="summary-value" id="summary-payment-amount">-</span>
      </div>
      <div class="summary-item">
        <span class="summary-label">Remaining Balance:</span>
        <span class="summary-value" id="summary-remaining">-</span>
      </div>
      <div class="summary-item">
        <span class="summary-label">Payment Method:</span>
        <span class="summary-value" id="summary-method">-</span>
      </div>
    </div>
  </div>
</div>

<div class="recent-payments-section">
  <div class="section-header">
    <h3>Recent Payments</h3>
    <button class="btn-secondary" onclick="refreshRecentPayments()">
      <span class="btn-icon">üîÑ</span>
      Refresh
    </button>
  </div>
  <div class="recent-payments-list" id="recent-payments-list">
    <div class="loading-message">Loading recent payments...</div>
  </div>
</div>
